<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surcharge Rules (TypeScript Version)</title>
</head>
<body>
    <div class="form-container">
        <h1 class="form-title">Surcharge Rules (Details)</h1>
        
        <div class="table-wrapper">
            <div class="property-table">
                <!-- Header Row -->
                <div class="row header-row">
                    <div>Service</div>
                    <div>Applicable Zones</div>
                    <div>Surcharge Code</div>
                    <div>Surcharge Name</div>
                    <div>Trigger Variable</div>
                    <div>Operator</div>
                    <div>Trigger Value</div>
                    <div>Calculation Type</div>
                    <div>Calculation Basis</div>
                    <div>Rate Base</div>
                    <div>Offset</div>
                    <div>Multiplier</div>
                    <div>Actions</div>
                </div>

                <!-- Data Row 1 -->
                <div class="row" data-row-id="1">
                    <div class="multiselect-wrapper">
                        <div class="multiselect-container services" data-name="service">
                            <div class="multiselect-display">
                                <span class="multiselect-text">Hermes Parcel Shop Drop Off</span>
                                <span class="multiselect-arrow">â–¼</span>
                            </div>
                            <div class="multiselect-dropdown">
                                <div class="multiselect-option" data-value="hermes_parcel_shop">
                                    <input type="checkbox" id="service-hermes_parcel_shop-1" checked>
                                    <label for="service-hermes_parcel_shop-1">Hermes Parcel Shop Drop Off</label>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">This field is required</div>
                    </div>
                    <div class="multiselect-wrapper">
                        <div class="multiselect-container applicable-zones" data-name="zones">
                            <div class="multiselect-display">
                                <span class="multiselect-text">All Zones</span>
                                <span class="multiselect-arrow">â–¼</span>
                            </div>
                            <div class="multiselect-dropdown">
                                <div class="multiselect-option" data-value="all">
                                    <input type="checkbox" id="zones-all-1" checked>
                                    <label for="zones-all-1">All Zones</label>
                                </div>
                            </div>
                        </div>
                        <div class="error-message"></div>
                    </div>
                    <div>
                        <input type="text" class="form-control" name="surcharge_code" required value="POD_FEE">
                        <div class="error-message">This field is required</div>
                    </div>
                    <div>
                        <input type="text" class="form-control" name="surcharge_name" required value="Proof of Delivery (POD)">
                        <div class="error-message">This field is required</div>
                    </div>

                    <div class="select-wrapper">
                        <select class="form-control trigger-variable" name="trigger_variable">
                            <option value="None" selected>None</option>
                            <option value="ShipDate">ShipDate</option>
                            <option value="Weight">Weight</option>
                            <option value="PostCode">PostCode</option>
                            <option value="Girth">Girth</option>
                            <option value="IsResidential">IsResidential</option>
                            <option value="PackagesCount">PackagesCount</option>
                        </select>
                        <div class="error-message"></div>
                    </div>
                    <div class="select-wrapper">
                        <select class="form-control operator" name="operator">
                            <option value="None" selected>None</option>
                            <option value="InRange">InRange</option>
                            <option value="MoreThan">MoreThan</option>
                            <option value="LessThan">LessThan</option>
                            <option value="InList">InList</option>
                            <option value="Is">Is</option>
                        </select>
                        <div class="error-message"></div>
                    </div>

                    <div>
                        <input type="text" class="form-control trigger-value" name="trigger_value" value="-" disabled>
                        <div class="error-message"></div>
                    </div>
                    <div class="select-wrapper">
                        <select class="form-control" name="calculation_type" required>
                            <option value="Fixed" selected>Fixed</option>
                            <option value="Percentage">Percentage</option>
                            <option value="Linear">Linear</option>
                        </select>
                        <div class="error-message">This field is required</div>
                    </div>
                    <div class="select-wrapper">
                        <select class="form-control" name="calculation_basis" required>
                            <option value="BasePrice" selected>BasePrice</option>
                            <option value="Subtotal">Subtotal</option>
                        </select>
                        <div class="error-message">This field is required</div>
                    </div>

                    <div>
                        <input type="number" class="form-control" name="rate_base" value="0.6" step="0.01" min="0" required>
                        <div class="error-message">Value must be greater than or equal to 0</div>
                    </div>
                    <div>
                        <input type="number" class="form-control" name="offset" value="0" step="1">
                        <div class="error-message"></div>
                    </div>
                    <div>
                        <input type="number" class="form-control" name="multiplier" value="0" step="1">
                        <div class="error-message"></div>
                    </div>
                    <div class="row-actions">
                        <button type="button" class="remove-row-btn" onclick="formController.removeRow(1)">âœ•</button>
                    </div>
                </div>

                <!-- Data Row 2 -->
                <div class="row" data-row-id="2">
                    <div class="multiselect-wrapper">
                        <div class="multiselect-container services" data-name="service">
                            <div class="multiselect-display">
                                <span class="multiselect-text">All Services</span>
                                <span class="multiselect-arrow">â–¼</span>
                            </div>
                            <div class="multiselect-dropdown">
                                <div class="multiselect-option" data-value="all">
                                    <input type="checkbox" id="service-all-2" checked>
                                    <label for="service-all-2">All Services</label>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">This field is required</div>
                    </div>
                    <div class="multiselect-wrapper">
                        <div class="multiselect-container applicable-zones" data-name="zones">
                            <div class="multiselect-display">
                                <span class="multiselect-text">All Zones</span>
                                <span class="multiselect-arrow">â–¼</span>
                            </div>
                            <div class="multiselect-dropdown">
                                <div class="multiselect-option" data-value="all">
                                    <input type="checkbox" id="zones-all-2" checked>
                                    <label for="zones-all-2">All Zones</label>
                                </div>
                            </div>
                        </div>
                        <div class="error-message"></div>
                    </div>
                    <div>
                        <input type="text" class="form-control" name="surcharge_code" required value="FUEL_PERCENT">
                        <div class="error-message">This field is required</div>
                    </div>
                    <div>
                        <input type="text" class="form-control" name="surcharge_name" required value="Fuel surcharge - percentage">
                        <div class="error-message">This field is required</div>
                    </div>

                    <div class="select-wrapper">
                        <select class="form-control trigger-variable" name="trigger_variable">
                            <option value="None" selected>None</option>
                            <option value="ShipDate">ShipDate</option>
                            <option value="Weight">Weight</option>
                            <option value="PostCode">PostCode</option>
                            <option value="Girth">Girth</option>
                            <option value="IsResidential">IsResidential</option>
                            <option value="PackagesCount">PackagesCount</option>
                        </select>
                        <div class="error-message"></div>
                    </div>
                    <div class="select-wrapper">
                        <select class="form-control operator" name="operator">
                            <option value="None" selected>None</option>
                            <option value="InRange">InRange</option>
                            <option value="MoreThan">MoreThan</option>
                            <option value="LessThan">LessThan</option>
                            <option value="InList">InList</option>
                            <option value="Is">Is</option>
                        </select>
                        <div class="error-message"></div>
                    </div>

                    <div>
                        <input type="text" class="form-control trigger-value" name="trigger_value" value="-">
                        <div class="error-message"></div>
                    </div>
                    <div class="select-wrapper">
                        <select class="form-control" name="calculation_type" required>
                            <option value="">Select...</option>
                            <option value="Fixed">Fixed</option>
                            <option value="Percentage" selected>Percentage</option>
                            <option value="Linear">Linear</option>
                        </select>
                        <div class="error-message">This field is required</div>
                    </div>
                    <div class="select-wrapper">
                        <select class="form-control" name="calculation_basis" required>
                            <option value="">Select...</option>
                            <option value="BasePrice">BasePrice</option>
                            <option value="Subtotal" selected>Subtotal</option>
                        </select>
                        <div class="error-message">This field is required</div>
                    </div>

                    <div>
                        <input type="number" class="form-control" name="rate_base" value="12.5" step="0.01" min="0" required>
                        <div class="error-message">Value must be greater than or equal to 0</div>
                    </div>
                    <div>
                        <input type="number" class="form-control" name="offset" value="0" step="1">
                        <div class="error-message"></div>
                    </div>
                    <div>
                        <input type="number" class="form-control" name="multiplier" value="0" step="1">
                        <div class="error-message"></div>
                    </div>
                    <div class="row-actions">
                        <button type="button" class="remove-row-btn" onclick="formController.removeRow(2)">
                            âœ•
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <button type="button" class="btn btn-success add-row-btn">
                <span class="icon">âž•</span> Add New Rule
            </button>
            <button type="button" class="btn btn-primary save-all-btn">
                <span class="icon">âœ“</span> Save All Rules
            </button>
        </div>
    </div>

    <!-- JSON Output Modal -->
    <div id="jsonModal" class="json-modal">
        <div class="json-modal-content">
            <div class="json-modal-header">
                <h2 class="json-modal-title">Result</h2>
                <button class="json-modal-close" id="closeJsonModal">&times;</button>
            </div>
            <div class="json-modal-body">
                <div class="json-actions">
                    <button class="json-action-btn" id="copyJsonBtn">
                        ðŸ“„ Copy
                    </button>
                    <button class="json-action-btn" id="downloadJsonBtn">
                        â¬‡ Download
                    </button>
                    <button class="json-action-btn" id="selectAllJsonBtn">
                        â˜‘ Select All
                    </button>
                </div>
                <div class="json-container">
                    <div class="json-header">
                        <span class="json-filename">surcharge-rules.json</span>
                    </div>
                    <div class="json-content" id="jsonContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Webpack will inject the bundle automatically -->
</body>
</html>